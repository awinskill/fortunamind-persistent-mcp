# FortunaMind Persistent MCP Server Configuration

# ===== DATABASE CONFIGURATION =====
# Supabase Database URL
DATABASE_URL=postgresql://postgres:[password]@db.[project-id].supabase.co:5432/postgres

# Supabase Configuration
SUPABASE_URL=https://[project-id].supabase.co
SUPABASE_ANON_KEY=your-anon-key-here
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# ===== SERVER CONFIGURATION =====
# Server Settings
MCP_SERVER_NAME=FortunaMind-Persistent-MCP
SERVER_HOST=0.0.0.0
SERVER_PORT=8080
LOG_LEVEL=INFO

# Environment
ENVIRONMENT=development  # development, staging, production

# ===== SECURITY CONFIGURATION =====
# JWT Configuration  
JWT_SECRET_KEY=your-very-secure-jwt-secret-key-here-min-32-chars
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# Security Settings
SECURITY_PROFILE=STRICT  # STRICT, MODERATE, LENIENT
API_RATE_LIMIT_PER_MINUTE=60
MAX_JOURNAL_ENTRY_LENGTH=2000

# ===== SUBSCRIPTION INTEGRATION =====
# FortunaMind Subscription Service
SUBSCRIPTION_API_URL=https://api.fortunamind.com/v1/subscriptions
SUBSCRIPTION_API_KEY=your-subscription-api-key-here
SUBSCRIPTION_CACHE_TTL_MINUTES=5

# Grace Period Settings
SUBSCRIPTION_GRACE_PERIOD_DAYS=7

# ===== TECHNICAL INDICATORS =====
# Market Data Configuration
TECHNICAL_INDICATORS_CACHE_TTL_MINUTES=5
SUPPORTED_SYMBOLS=BTC,ETH,LTC,BCH,ADA,SOL,MATIC,DOT,AVAX,UNI

# Technical Analysis Settings
DEFAULT_RSI_PERIOD=14
DEFAULT_SMA_PERIODS=20,50,200
DEFAULT_EMA_PERIODS=12,26
DEFAULT_MACD_FAST=12
DEFAULT_MACD_SLOW=26
DEFAULT_MACD_SIGNAL=9

# ===== MONITORING & LOGGING =====
# Structured Logging
LOG_FORMAT=json  # json, text
LOG_FILE_PATH=logs/persistent-mcp.log
LOG_MAX_SIZE_MB=100
LOG_BACKUP_COUNT=5

# Monitoring
ENABLE_METRICS=true
METRICS_PORT=9090
HEALTH_CHECK_PATH=/health

# ===== DEVELOPMENT SETTINGS =====
# Development Mode Settings (only for development)
DEVELOPMENT_MODE=true
ENABLE_DEBUG_ENDPOINTS=false
MOCK_SUBSCRIPTION_CHECK=false
MOCK_TECHNICAL_DATA=false

# Testing Database (only for tests)
TEST_DATABASE_URL=postgresql://postgres:test@localhost:5432/test_fortunamind_persistent

# ===== DOCKER CONFIGURATION =====
# Docker Environment Variables
DOCKER_IMAGE_TAG=latest
DOCKER_REGISTRY=ghcr.io/awinskill

# ===== FEATURE FLAGS =====
# Feature Toggles
ENABLE_TRADING_JOURNAL=true
ENABLE_TECHNICAL_INDICATORS=true
ENABLE_PORTFOLIO_INTEGRATION=true
ENABLE_PRE_TRADE_ANALYSIS=true

# Beta Features
ENABLE_ADVANCED_ANALYTICS=false
ENABLE_PREDICTIVE_INSIGHTS=false
ENABLE_SOCIAL_FEATURES=false

# ===== PERFORMANCE CONFIGURATION =====
# Database Connection Pooling
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30

# HTTP Client Settings
HTTP_TIMEOUT_SECONDS=30
HTTP_RETRY_ATTEMPTS=3
HTTP_RETRY_BACKOFF_FACTOR=2.0

# Cache Settings
REDIS_URL=redis://localhost:6379/0  # Optional: for advanced caching
CACHE_DEFAULT_TTL_SECONDS=300

# ===== SECURITY NOTES =====
# 
# IMPORTANT SECURITY REMINDERS:
#
# 1. NEVER store API credentials in environment variables
#    - Users provide Coinbase API keys per session only
#    - No API keys should ever be persisted
#
# 2. Use strong, unique secrets:
#    - JWT_SECRET_KEY should be cryptographically random
#    - Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
#
# 3. Database security:
#    - Use connection strings with strong passwords
#    - Enable SSL for production database connections
#    - Regularly rotate database credentials
#
# 4. Production checklist:
#    - Set ENVIRONMENT=production
#    - Set LOG_LEVEL=INFO or WARNING
#    - Disable debug endpoints
#    - Use HTTPS only
#    - Enable rate limiting
#
# 5. Monitoring:
#    - Monitor failed authentication attempts
#    - Track API usage patterns
#    - Set up alerts for unusual activity